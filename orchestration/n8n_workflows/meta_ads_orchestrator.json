{
  "name": "Meta Ads Orchestrator",
  "description": "Meta Ads-driven cross-platform campaign orchestration",
  "active": true,
  "nodes": [
    {
      "parameters": {
        "path": "meta-ads-trigger",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook_trigger",
      "name": "Meta Ads Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "url": "http://ml-core:8000/meta-centric/analyze_meta_campaign",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "httpBasicAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "campaign_name",
              "value": "={{$json.campaign_name}}"
            },
            {
              "name": "daily_budget",
              "value": "={{$json.daily_budget}}"
            },
            {
              "name": "targeting",
              "value": "={{$json.targeting}}"
            },
            {
              "name": "objective",
              "value": "={{$json.objective}}"
            },
            {
              "name": "artist_name",
              "value": "={{$json.artist_name}}"
            },
            {
              "name": "song_name",
              "value": "={{$json.song_name}}"
            }
          ]
        },
        "options": {
          "timeout": 30000
        }
      },
      "id": "ml_analysis",
      "name": "ML Campaign Analysis",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 300]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "youtube_condition",
              "leftValue": "={{$json.recommended_platforms}}",
              "rightValue": "youtube",
              "operator": {
                "type": "array",
                "operation": "contains",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "youtube_condition",
      "name": "YouTube Enabled?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [680, 200]
    },
    {
      "parameters": {
        "url": "http://youtube-uploader:9003/upload_from_meta",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "campaign_id",
              "value": "={{$('Meta Ads Webhook').item.json.campaign_id}}"
            },
            {
              "name": "campaign_name",
              "value": "={{$('Meta Ads Webhook').item.json.campaign_name}}"
            },
            {
              "name": "budget_allocation",
              "value": "={{$json.budget_allocation.youtube}}"
            },
            {
              "name": "posting_time",
              "value": "={{$json.posting_schedule.youtube}}"
            }
          ]
        }
      },
      "id": "youtube_upload",
      "name": "YouTube Upload",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [900, 120]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "tiktok_condition",
              "leftValue": "={{$json.recommended_platforms}}",
              "rightValue": "tiktok",
              "operator": {
                "type": "array",
                "operation": "contains",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "tiktok_condition",
      "name": "TikTok Enabled?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [680, 300]
    },
    {
      "parameters": {
        "url": "http://unified-orchestrator:10000/tiktok_from_meta",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "campaign_id",
              "value": "={{$('Meta Ads Webhook').item.json.campaign_id}}"
            },
            {
              "name": "virality_score",
              "value": "={{$json.virality_score}}"
            },
            {
              "name": "budget_allocation",
              "value": "={{$json.budget_allocation.tiktok}}"
            },
            {
              "name": "posting_schedule",
              "value": "={{$json.posting_schedule}}"
            }
          ]
        }
      },
      "id": "tiktok_distribution",
      "name": "TikTok Distribution",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [900, 220]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "instagram_condition",
              "leftValue": "={{$json.recommended_platforms}}",
              "rightValue": "instagram",
              "operator": {
                "type": "array",
                "operation": "contains",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "instagram_condition",
      "name": "Instagram Enabled?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [680, 400]
    },
    {
      "parameters": {
        "url": "http://unified-orchestrator:10000/instagram_from_meta",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "campaign_id",
              "value": "={{$('Meta Ads Webhook').item.json.campaign_id}}"
            },
            {
              "name": "content_strategy",
              "value": "={{$json.cross_platform_strategy.content_strategy.instagram}}"
            },
            {
              "name": "budget_allocation",
              "value": "={{$json.budget_allocation.instagram}}"
            },
            {
              "name": "posting_time",
              "value": "={{$json.posting_schedule.instagram}}"
            }
          ]
        }
      },
      "id": "instagram_stories",
      "name": "Instagram Stories",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [900, 320]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "twitter_condition",
              "leftValue": "={{$json.recommended_platforms}}",
              "rightValue": "twitter",
              "operator": {
                "type": "array",
                "operation": "contains",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "twitter_condition",
      "name": "Twitter Enabled?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [680, 500]
    },
    {
      "parameters": {
        "url": "http://unified-orchestrator:10000/twitter_from_meta",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "campaign_id",
              "value": "={{$('Meta Ads Webhook').item.json.campaign_id}}"
            },
            {
              "name": "thread_strategy",
              "value": "={{$json.cross_platform_strategy.content_strategy.twitter}}"
            },
            {
              "name": "budget_allocation",
              "value": "={{$json.budget_allocation.twitter}}"
            },
            {
              "name": "posting_time",
              "value": "={{$json.posting_schedule.twitter}}"
            }
          ]
        }
      },
      "id": "twitter_thread",
      "name": "Twitter Thread",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [900, 420]
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "id": "merge_results",
      "name": "Merge Platform Results",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [1120, 300]
    },
    {
      "parameters": {
        "url": "http://meta-ads-manager:9000/optimize_based_on_results",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "campaign_id",
              "value": "={{$('Meta Ads Webhook').item.json.campaign_id}}"
            },
            {
              "name": "platform_results",
              "value": "={{$json}}"
            },
            {
              "name": "optimization_mode",
              "value": "cross_platform_feedback"
            }
          ]
        }
      },
      "id": "meta_optimization",
      "name": "Meta Ads Optimization",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1340, 300]
    },
    {
      "parameters": {
        "url": "http://unified-orchestrator:10000/setup_campaign_monitoring",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "campaign_id",
              "value": "={{$('Meta Ads Webhook').item.json.campaign_id}}"
            },
            {
              "name": "platforms",
              "value": "={{$('ML Campaign Analysis').item.json.recommended_platforms}}"
            },
            {
              "name": "monitoring_config",
              "value": {
                "alerts_enabled": true,
                "performance_threshold": 0.8,
                "budget_monitoring": true,
                "cross_platform_analytics": true
              }
            }
          ]
        }
      },
      "id": "setup_monitoring",
      "name": "Setup Monitoring",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1340, 420]
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "id": "webhook_response",
      "name": "Webhook Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [1560, 360]
    }
  ],
  "connections": {
    "webhook_trigger": {
      "main": [
        [
          {
            "node": "ml_analysis",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ml_analysis": {
      "main": [
        [
          {
            "node": "youtube_condition",
            "type": "main",
            "index": 0
          },
          {
            "node": "tiktok_condition",
            "type": "main",
            "index": 0
          },
          {
            "node": "instagram_condition",
            "type": "main",
            "index": 0
          },
          {
            "node": "twitter_condition",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "youtube_condition": {
      "main": [
        [
          {
            "node": "youtube_upload",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "youtube_upload": {
      "main": [
        [
          {
            "node": "merge_results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "tiktok_condition": {
      "main": [
        [
          {
            "node": "tiktok_distribution",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "tiktok_distribution": {
      "main": [
        [
          {
            "node": "merge_results",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "instagram_condition": {
      "main": [
        [
          {
            "node": "instagram_stories",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "instagram_stories": {
      "main": [
        [
          {
            "node": "merge_results",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "twitter_condition": {
      "main": [
        [
          {
            "node": "twitter_thread",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "twitter_thread": {
      "main": [
        [
          {
            "node": "merge_results",
            "type": "main",
            "index": 3
          }
        ]
      ]
    },
    "merge_results": {
      "main": [
        [
          {
            "node": "meta_optimization",
            "type": "main",
            "index": 0
          },
          {
            "node": "setup_monitoring",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "meta_optimization": {
      "main": [
        [
          {
            "node": "webhook_response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "setup_monitoring": {
      "main": [
        [
          {
            "node": "webhook_response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2025-10-27T12:00:00.000Z",
      "updatedAt": "2025-10-27T12:00:00.000Z",
      "id": "meta-ads-orchestration",
      "name": "Meta Ads Orchestration"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2025-10-27T12:00:00.000Z",
  "versionId": "meta-centric-v1"
}