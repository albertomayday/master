{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "DOCKERFILE",
    "dockerfilePath": "docker/Dockerfile.unified-railway"
  },
  "deploy": {
    "numReplicas": 1,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3,
    "healthcheckPath": "/_stcore/health",
    "healthcheckTimeout": 60,
    "sleepApplication": false,
    "startCommand": "supervisord -c /etc/supervisord.conf",
    "envVars": {
      "DUMMY_MODE": "false",
      "ENVIRONMENT": "production",
      "STREAMLIT_SERVER_HEADLESS": "true",
      "STREAMLIT_BROWSER_GATHER_USAGE_STATS": "false"
    },
    "ports": [
      { "port": 8000, "public": true },
      { "port": 8501, "public": true }
    ]
  }
}